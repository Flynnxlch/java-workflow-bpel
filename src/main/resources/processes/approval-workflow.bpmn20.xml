<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:flowable="http://flowable.org/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="approval-workflow-definitions" targetNamespace="http://flowable.org/bpmn" exporter="Flowable Open Source Modeler" exporterVersion="6.8.0">
  <bpmn2:process id="approval-workflow" name="Approval Workflow" isExecutable="true">
    <bpmn2:startEvent id="startEvent" name="Start"/>
    <bpmn2:userTask id="reviewTask" name="Review Task" flowable:assignee="${reviewer}">
      <bpmn2:documentation>User task untuk review dokumen</bpmn2:documentation>
    </bpmn2:userTask>
    <bpmn2:exclusiveGateway id="decisionGateway" name="Decision"/>
    <bpmn2:userTask id="approvalTask" name="Approval Task" flowable:assignee="${approver}">
      <bpmn2:documentation>User task untuk approval</bpmn2:documentation>
    </bpmn2:userTask>
    <bpmn2:userTask id="rejectionTask" name="Rejection Task" flowable:assignee="${reviewer}">
      <bpmn2:documentation>User task untuk rejection</bpmn2:documentation>
    </bpmn2:userTask>
    <bpmn2:serviceTask id="notificationTask" name="Send Notification" flowable:class="com.rpl.bpm.service.NotificationServiceTask">
      <bpmn2:documentation>Service task untuk mengirim notifikasi</bpmn2:documentation>
    </bpmn2:serviceTask>
    <bpmn2:endEvent id="endEvent" name="End"/>
    <bpmn2:sequenceFlow id="flow1" sourceRef="startEvent" targetRef="reviewTask"/>
    <bpmn2:sequenceFlow id="flow2" sourceRef="reviewTask" targetRef="decisionGateway"/>
    <bpmn2:sequenceFlow id="flow3" name="Approved" sourceRef="decisionGateway" targetRef="approvalTask">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[${approved == true}]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="flow4" name="Rejected" sourceRef="decisionGateway" targetRef="rejectionTask">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[${approved == false}]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="flow5" sourceRef="approvalTask" targetRef="notificationTask"/>
    <bpmn2:sequenceFlow id="flow6" sourceRef="rejectionTask" targetRef="notificationTask"/>
    <bpmn2:sequenceFlow id="flow7" sourceRef="notificationTask" targetRef="endEvent"/>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_approval-workflow">
    <bpmndi:BPMNPlane id="BPMNPlane_approval-workflow" bpmnElement="approval-workflow">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="startEvent">
        <dc:Bounds x="100" y="100" width="36" height="36"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_UserTask_2" bpmnElement="reviewTask">
        <dc:Bounds x="200" y="78" width="100" height="80"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_2" bpmnElement="decisionGateway" isMarkerVisible="true">
        <dc:Bounds x="365" y="93" width="50" height="50"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_UserTask_3" bpmnElement="approvalTask">
        <dc:Bounds x="480" y="78" width="100" height="80"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_UserTask_4" bpmnElement="rejectionTask">
        <dc:Bounds x="480" y="200" width="100" height="80"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_2" bpmnElement="notificationTask">
        <dc:Bounds x="650" y="78" width="100" height="80"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_2" bpmnElement="endEvent">
        <dc:Bounds x="812" y="100" width="36" height="36"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_flow1" bpmnElement="flow1" flowable:sourceDockerX="18.0" flowable:sourceDockerY="18.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <di:waypoint x="136" y="118"/>
        <di:waypoint x="200" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow2" bpmnElement="flow2" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="25.0" flowable:targetDockerY="25.0">
        <di:waypoint x="300" y="118"/>
        <di:waypoint x="365" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow3" bpmnElement="flow3" flowable:sourceDockerX="50.0" flowable:sourceDockerY="25.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <di:waypoint x="415" y="118"/>
        <di:waypoint x="480" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow4" bpmnElement="flow4" flowable:sourceDockerX="25.0" flowable:sourceDockerY="50.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <di:waypoint x="390" y="143"/>
        <di:waypoint x="390" y="240"/>
        <di:waypoint x="480" y="240"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow5" bpmnElement="flow5" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <di:waypoint x="580" y="118"/>
        <di:waypoint x="650" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow6" bpmnElement="flow6" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <di:waypoint x="530" y="240"/>
        <di:waypoint x="700" y="240"/>
        <di:waypoint x="700" y="158"/>
        <di:waypoint x="650" y="158"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow7" bpmnElement="flow7" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="18.0" flowable:targetDockerY="18.0">
        <di:waypoint x="750" y="118"/>
        <di:waypoint x="812" y="118"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>
